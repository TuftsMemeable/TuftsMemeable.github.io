<html>

  <head>
    <style>
      .designer {
        text-align: center;
        display: block;
        position: relative;
        border-width: 0px;
        width: 300px;
        height: 300px;
        padding-bottom: 30px;
      }
      #designbox {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 15px;
        right: 20px;
      }
      #innerMemeImage {
        z-index: 10;
        position: absolute;
        left: 75px;
        top: 110px;
        width: 100px;
        height: 100px;
        opacity: 0%;
      }
      #designForm {
        margin-top: 50px;
      }
    </style>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="createOrder.js"></script>
    <script type="text/javascript">
      $(function(){ $(".nav").load("nav.html");$(".footer").load("footer.html");});
    </script>
    <script type="text/javascript">
      $(function(){ $(".nav").load("nav.html");
      $(".footer").load("footer.html");});

      var images = {
        "tshirt": "tshirt.jpg",
        "waterbottle": "waterbottle2.png",
        "sweatshirt": "sweatshirt.jpg"
      }

      $(window).load(function() {
        var params = decodeOrderData(window.location.search);

        /* default order type to shirt */
        if (params["orderType"] == undefined) {
          params["orderType"] = "tshirt";
        }
        var image = images[params["orderType"]];

        /* fill default radio button */
        $("#" + params["orderType"]).prop("checked", true);
        
        $("#designbox").attr("src", image);

      });
    </script>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>
  
  <body>
    <div class="nav"></div>
    
      <script language="javascript">
        $(document).ready(function(){
          $('body').css({ display: 'none'}).fadeIn(1500);
        });
      </script>

  <div id="hero-design">
      
  </div>
  <div class="designer">
      <img src="tshirt.jpg" id="designbox">
      <img src="" id="innerMemeImage">
  </div>   
  <form id="designForm">
    <label>Order Type:</label>
    <input type="radio" id="tshirt" name="orderType" value="tshirt">
    <label for="tshirt">T-Shirt</label>
    <input type="radio" id="sweatshirt" name="orderType" value="sweatshirt">
    <label for="sweatshirt">Sweatshirt</label>
    <input type="radio" id="waterbottle" name="orderType" value="waterbottle">
    <label for="waterbottle">Water Bottle</label><br>
    <label>Order Size:</label>
    <input type="radio" id="small" name="size" value="small">
    <label for="size">Small</label>
    <input type="radio" id="medium" name="size" value="medium" checked="checked">
    <label for="size">Medium</label>
    <input type="radio" id="large" name="size" value="large">
    <label for="size">Large</label><br>
    <label>Meme Image:</label>
    <input type="file" id="memeImage" name="memeImage" accept="image/png, image/jpeg, image/jpg">
  <form>
  
  <a class="button" id="placeOrder" href="placeorder.html">Place Order</a>

  <div class="footer"></div>

  <script>
    /* form validation */
    var form = $("#designForm");
    var designBox = $("#designbox");

    var offsets = {
      "tshirt": "110px",
      "sweatshirt": "110px",
      "waterbottle": "130px"
    };
    
    /* update the source of the meme image on input change */
    $("input[type=radio][name=orderType]").change(function() {
      $("#innerMemeImage").css("top", offsets[this.value]);
      designBox.attr("src", images[this.value]);
    });
    
    /* update the background image (shirt, sweatshirt, waterbottle) on
     * input type change */
    $("#memeImage").change(function() {
      if (this.files && this.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
          var image = new Image();
          image.src = e.target.result;
          image.onload = function() {
            if (this.width != this.height) {
              alert("Image must be a square.");
              $("#memeImage").val("");
              return;
            }
            $("#innerMemeImage").css("opacity", "100%");
            $("#innerMemeImage").attr("src", e.target.result);
          }
        }
        reader.readAsDataURL(this.files[0]);
      }
    });
  </script>
  </body>
</html>
